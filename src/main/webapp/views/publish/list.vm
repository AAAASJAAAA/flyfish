<style>
	#overflow-x-back {
		width: 100%;
		height: 25px;
		background: #999;
		position: relative;
	}

	#overflow-x-front {
		width: 140px;
		height: 25px;
		background: #5bc0de;
		position: relative;
	}

	#overflow-x-front span {
		padding-left: 45px;
		color: white;
		font-size: 16px;
	}

	#div-overflow-back {
		width: 100%;
		overflow: hidden;
		position: relative;
	}

	#div-overflow-front {
		width: 1800px;
		position: relative;
	}
</style>

<div class="row">
	<div class="col-md-12">
		<h3 class="page-header">【$!{store.platform.name}-$!{store.name}】商品信息列表</h3>
	</div>
</div>

<div class="panel panel-default">
	<div class="panel-heading">
		<div class="col-md-12">
			<button type="button" class="btn btn-info" data-toggle='modal' data-target='#exportModal'>导出刊登</button>
		</div>
		<div class="clearfix"></div>
	</div>

	<div id="div-overflow-back" class="panel-body">
		<div id="overflow-x-back">
			<div id="overflow-x-front"><span>滚动条</span></div>
		</div>
		<div id="div-overflow-front">
			<table class="table table-striped table-bordered table-hover">
				<thead>
					<tr>
						<th width="115px">操作</th>
						<th width="60px">Listing<br>主图</th>
						<th width="60px">SKU<br>主图</th>
						<th width="60px">SKU</th>
						<th width="60px">商品<br>编码</th>
						<th width="100px">商品<br>名称</th>
						<th width="60px">大类<br>名称</th>
						<th width="60px">小类<br>名称</th>
						<th width="50px">是否<br>停售</th>
						<th width="50px">是否<br>带电</th>
						<th width="60px">重量<br>（G）</th>
						<th width="60px">成本<br>（元）</th>
						<th width="60px">业绩<br>归属1</th>
						<th width="80px">业绩<br>归属2</th>
						<th width="60px">采购员</th>
						<th width="50px">所有<br>库存</th>
						<th width="150px">供应商</th>
						<th >标题</th>
						<th width="90px">创建时间</th>
						<th width="90px">更新时间</th>
					</tr>
				</thead>
				<tbody>
					#if(!$!goodsForms || $!{goodsForms.size()} == 0)
					<tr>
						<td colspan="11">
							<h3>无数据</h3>
						</td>
					</tr>
					#end #foreach($rec in $!goodsForms)
					<tr>
						<td>
							<button type="button" class="btn btn-warning btn-sm margin-bottom" onclick="window.location.href='${rc.contextPath}/goods/edit.html?sku=$!{rec.goods.sku}'">修改</button>
							<button type="button" class="btn btn-danger btn-sm margin-bottom" onclick="window.location.href='${rc.contextPath}/publish/remove.html?storeId=$!{store.id}&sku=$!{rec.goods.sku}'">移除</button>
						</td>
						<td><img class="lazy" height="40px" width="40px" data-original="http://www.bentain.site/$!{rec.goodsImg.mainImgUrl}"
							/></td>
						<td><img class="lazy" height="40px" width="40px" data-original="http://www.bentain.site/$!{rec.goodsImg.vMainImgUrl}"
							/></td>
						<td>$!{rec.goods.sku}</td>
						<td>$!{rec.goods.parentSku}</td>
						<td>$!{rec.goods.name}</td>
						<td>$!{rec.goods.bigCataName}</td>
						<td>$!{rec.goods.smallCataName}</td>
						<td>$!{rec.goods.state}</td>
						<td>$!{rec.goods.isElectric}</td>
						<td>$!{rec.goods.weight}</td>
						<td>$!{rec.goods.costPrice}</td>
						<td>$!{rec.goods.bussOwner1}</td>
						<td>$!{rec.goods.bussOwner2}</td>
						<td>$!{rec.goods.buyer}</td>
						<td>$!{rec.goods.allNum}</td>
						<td>
							#if("$!{rec.goods.url}" != "") <a target="_blank" class="btn btn-info btn-sm margin-bottom" href="$!{rec.goods.url}">供1</a>#end
							#if("$!{rec.goods.url2}" != "") <a target="_blank" class="btn btn-info btn-sm margin-bottom" href="$!{rec.goods.url2}">供2</a>#end
							#if("$!{rec.goods.url3}" != "") <a target="_blank" class="btn btn-info btn-sm margin-bottom" href="$!{rec.goods.url3}">供3</a>#end
						</td>
						<td>$!{rec.goodsPlat.title}</td>
						<td>$!{rec.goods.createTm}</td>
						<td>#if($!{rec.goods.modifyTm}) $!{rec.goods.modifyTm} #else $!{rec.goodsPlat.modifyTm} #end</td>
					</tr>
					#end
				</tbody>
			</table>
		</div>
	</div>
</div>

<script>
	$(function () {
		$("img.lazy").lazyload();
	});

	window.onload = function () {
		var oDiv1 = document.getElementById('overflow-x-back');
		var oDiv2 = document.getElementById('overflow-x-front');
		var oDiv3 = document.getElementById('div-overflow-back');
		var oDiv4 = document.getElementById('div-overflow-front');
		var iMaxWidth = oDiv1.offsetWidth - oDiv2.offsetWidth;
		oDiv2.onmousedown = function (ev) {
			var ev = ev || event;
			var disX = ev.clientX - this.offsetLeft;
			document.onmousemove = function (ev) {
				var ev = ev || event;
				var T = ev.clientX - disX;
				if (T < 0) {
					T = 0;
				} else if (T > iMaxWidth) {
					T = iMaxHeight;
				}
				var iScale = T / iMaxWidth;
				oDiv4.style.left = (oDiv3.offsetWidth - 30 - oDiv4.offsetWidth) * iScale + 'px';
				oDiv2.style.left = T + 'px';
			}
			document.onmouseup = function () {
				document.onmousemove = document.onmouseup = null;
			}
			return false;
		}
	}

</script>