<div class="row">
	<div class="col-md-12">
		<h1 class="page-header">物流方式列表</h1>
	</div>
</div>

<div class="panel panel-default">
	<div class="panel-heading">
		<button type="button" class="btn btn-success margin-bottom" data-toggle='modal' data-target='#addModal'>新增</button>
	</div>
	<div class="panel-body">
		<div class="table-responsive">
			<table class="table table-striped table-bordered table-hover">
	    	  <thead>
			    <tr>
			      <th>物流产品</th>
			      <th>100克加权运费</th>
			      <th>备注</th>
			    </tr>
			  </thead>			  
			  <tbody>
				 #foreach($!member in $!map.entrySet())
					<tr>
			          <td>$!member.key</td>
					  <td>$!mapFee100ByWeight.get($!member.key)</td>
					  <td>$!remarkMap.get($!member.key)</td>
			        </tr>
					<tr id="$!member.key">
					  <td colspan="3">
						<table class="table table-striped table-bordered table-hover">
            	    	  <thead>
            			    <tr>
            			      <th>发货国家</th>
            			      <th>计费说明</th>
            			      <th>100克运费</th>
            			      <th>平台权重</th>
            			      <th>最后更新人</th>
            			      <th>最后更新时间</th>
            				  <th>操作</th>
            			    </tr>
            			  </thead>
            			  <tbody>
            				
            				#foreach($rec in $!member.value)
            			        <tr>
            			          <td>$!{rec.country.name}</td>
            			          <td>#if($!{rec.method} == 1) 运费=$!{rec.paraA} * 重量 + $!{rec.paraB} 
            							#elseif($!{rec.method} == 2) 起步运费 = $!{rec.paraC}；重量 &gt;= $!{rec.paraX}克，运费 = $!{rec.paraD} * 重量
            								#else 无费用说明 #end
            					  </td>
            			          <td>$!{rec.fee100}</td>
            			          <td>#if(!$!countryWeight.get($!{rec.country.id})) 0.00% #else $!countryWeight.get($!{rec.country.id})% #end</td>
            			          <td>$!{rec.modifyer}</td>
            			          <td>$!{rec.modifyTime}</td>
            					  <td>修改 删除</td>
            			        </tr>
            				#end
            			  </tbody>
            			</table>
					  </td>
                    </tr>
				 #end 
					
			 </tbody>
			</table>
		</div>
	</div>
</div>

<!-- import Modal-->
<div id="addModal" class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">新增物流方式</h4>
      </div>
      <div class="modal-body">
         <form id="addForm" action="${rc.contextPath}/logis/add.html" method="post">
           <div class="form-group">
                <label>选择物流产品</label>
                <select name="prod" class="form-control">
					#foreach($!prod in $!prods)
                    <option value="$!{prod.id}">$!{prod.name}</option>
					#end
                </select>
            </div>
			<div class="form-group">
                <label>选择发货国家</label>
                <select name="country" class="form-control">
					#foreach($!country in $!countries)
                    <option value="$!{country.id}">$!{country.name}</option>
					#end
                </select>
            </div>
           <div class="form-group">
                <label>选择计费模式</label>
                <div class="radio">
                    <label>
                        <input type="radio" name="method" value="1" checked="">模式1：运费 = A * 重量 + B</input>
                    </label>
                </div>
				<div>
					运费 = <input name="paraA" class="form-control input-para" placeholder="A"> * 重量 + <input name="paraB" class="form-control input-para" placeholder="B">
                </div>
				<div class="radio">
                    <label>
                        <input type="radio" name="method" value="2">模式2：起步运费 = C；重量 &gt;= X克，运费 = D * 重量</input>
                    </label>
                </div>
				<div>
					起步运费 = <input name="paraC" class="form-control input-para" placeholder="C">；重量 &gt;= <input name="paraX" class="form-control input-para" placeholder="X">克，运费 = <input name="paraD" class="form-control input-para" placeholder="D"> * 重量 
                </div>
            </div>
            
	     </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="confirm-yes btn btn-primary" id="btnAdd">提交</button>
        <button type="button" class="confirm-no btn btn-danger" data-dismiss="modal">取消</button>
      </div>
    </div>
  </div>
</div>

<script>
  $("#btnAdd").on("click", function () {
     document.getElementById("addForm").submit();
  })
</script>
